(this["webpackJsonpparis-mask-app"]=this["webpackJsonpparis-mask-app"]||[]).push([[0],{104:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(20),o=n.n(a),c=n(77),r=n.n(c),i=(n(104),n(74)),s=n.n(i),l=n(78),u=n(46),p=(n(106),n(80)),f=n(69),w=n(84),m=n(81),b=n(83),d=n(82),j=n(5),O=n(55),v=n(45),g=n(51),h=n(58),k=n(79),E=n(65),S=n(64),P=n(75),y=n(73),N=n(72);var z=new O.b({image:new h.a({radius:7,fill:new g.a({color:"black"}),stroke:new v.a({color:"white",width:2})})}),C=function(e,t){var n=new P.a(e,t),a=new y.a(n),o=new b.a({features:[a],projection:"EPSG:3857"});return new m.a({source:o,style:[new O.b({stroke:new v.a({color:"blue",width:3}),fill:new g.a({color:"rgba(0, 0, 255, 0.1)"})})]})};function G(e,t){var n=t.getPosition();if(n){var a=Object(E.a)(e),o=new S.a(n),c=new y.a(o);a.drawFeature(c,z)}}var U=function(e,t,n){var a=new P.a(e,t),o=new y.a(a);n.getSource().clear(),n.getSource().addFeatures([o])},x=function(){var e,t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),m=Object(u.a)(i,2),b=m[0],O=m[1],v=Object(a.useState)(null),g=Object(u.a)(v,2),h=g[0],E=g[1],S=Object(a.useState)(null),P=Object(u.a)(S,2),y=P[0],z=P[1],x=Object(a.useState)(null),A=Object(u.a)(x,2),B=A[0],F=A[1],I=Object(a.useState)(null),J=Object(u.a)(I,2),T=J[0],W=J[1],D=Object(a.useState)(null),H=Object(u.a)(D,2),L=H[0],M=H[1],$=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new d.a,n=new w.a({source:t}),a=C(Object(j.d)([2.337242,48.857351]),1200),o=new p.a({target:"map",layers:[n,a],view:new f.a({projection:"EPSG:3857",center:Object(j.d)([2.3488,48.8534]),zoom:13}),controls:[]}),c=new k.a({trackingOptions:{enableHighAccuracy:!0},projection:"EPSG:3857"}),n.on("postrender",(function(e){return G(e,c)})),F(c),W(a),M(o);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){$()}),[]),Object(a.useEffect)((function(){B&&!B.getTracking()&&(B.setTracking(!0),B.on("change",(function(){z(B.getPosition())})),B.on("error",(function(e){console.warn("geolocation error",e)})))}),[B,L]),Object(a.useEffect)((function(){h&&U(h,1500,T)}),[h,T]),Object(a.useEffect)((function(){if(y&&h){var e=N.point(Object(j.m)(y)),t=N.point(Object(j.m)(h)),n=N.distance(e,t)<1;n&&!c&&window.navigator.vibrate(300),r(n),L.render()}}),[y,h]),window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),e=t,O(!0)})),o.a.createElement("div",{className:"app"},o.a.createElement("div",{id:"map",className:"map"}),o.a.createElement("header",{className:(c?"zone-ok":"zone-nok")+" app-header"}),o.a.createElement("div",{className:"use-position",onClick:function(){E(B.getPosition())}},"Use Position"),b?o.a.createElement("footer",{className:"install-footer",onClick:function(){O(!1),e.prompt(),e.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt")}))}},"Install as an App"):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,n){e.exports=n(107)}},[[99,1,2]]]);
//# sourceMappingURL=main.51d92d16.chunk.js.map
(this["webpackJsonpparis-mask-app"]=this["webpackJsonpparis-mask-app"]||[]).push([[0],{111:function(e,t,n){e.exports=n(119)},116:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){"use strict";n.r(t);var a=n(38),r=n.n(a),o=n(88),c=n.n(o),s=(n(116),n(65)),i=n.n(s),l=n(89),u=n(85),p=n(86),f=(n(118),n(91)),m=n(80),d=n(96),w=n(92),h=n(95),v=n(93),g=n(3),b=n(94),y=n(60),k=n(56),j=n(55),E=n(64),O=n(90),P=n(79),x=n(47),S=n(71),F=n(84),N=new y.b({fill:new j.a({color:"rgba(0, 0, 255, 0.3)"})}),C=new y.b({image:new E.a({radius:7,fill:new j.a({color:"black"}),stroke:new k.a({color:"white",width:2})})});function G(){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opendata.paris.fr/api/records/1.0/search/?dataset=coronavirus-port-du-masque-obligatoire-lieux-places-et-marches&q=&rows=100&facet=nom_long&facet=ardt");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.records.map((function(e){return e.fields.geo_shape.coordinates[0].map((function(e){return Object(g.d)(e)}))})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){var n=t.getPosition();if(n){var a=Object(P.a)(e),r=new x.a(n),o=new S.a(r);a.drawFeature(o,C)}}var A=function(){var e,t=Object(a.useState)(!1),n=Object(p.a)(t,2),o=n[0],c=n[1],s=Object(a.useState)(!1),y=Object(p.a)(s,2),k=y[0],j=y[1],E=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r,s,u,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:t=e.sent,n={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:3857",center:[0,0]}},features:[{type:"Feature",geometry:{type:"Polygon",coordinates:t}}]},a=new h.a({features:(new b.a).readFeatures(n)}),r=new w.a({source:a,style:N}),s=new v.a,u=new f.a({target:"map",layers:[new d.a({source:s}),r],view:new m.a({projection:"EPSG:3857",center:Object(g.d)([2.3488,48.8534]),zoom:13}),controls:[]}),(p=new O.a({trackingOptions:{enableHighAccuracy:!0},projection:"EPSG:3857"})).setTracking(!0),p.on("change",(function(){var e=p.getPosition();if(e){var n,a=F.point(e),r=!1,s=Object(l.a)(t);try{for(s.s();!(n=s.n()).done;){var i=n.value,f=F.polygon([i]);if(r=r||F.booleanPointInPolygon(a,f))break}}catch(m){s.e(m)}finally{s.f()}r&&!o&&window.navigator.vibrate(300),c(r),u.render()}})),p.on("error",(function(e){console.warn("geolocation error",e)})),r.on("postrender",(function(e){return q(e,p)}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){E()}),[]),window.addEventListener("beforeinstallprompt",(function(t){t.preventDefault(),e=t,j(!0)})),r.a.createElement("div",{className:"app"},r.a.createElement("div",{id:"map",className:"map"}),r.a.createElement("header",{className:(o?"mask-on":"mask-off")+" app-header"}),k?r.a.createElement("footer",{className:"install-footer",onClick:function(){j(!1),e.prompt(),e.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt")}))}},"Install as an App"):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[111,1,2]]]);
//# sourceMappingURL=main.55f72882.chunk.js.map
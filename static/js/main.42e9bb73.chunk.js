(this["webpackJsonpparis-mask-app"]=this["webpackJsonpparis-mask-app"]||[]).push([[0],{109:function(e,n,t){e.exports=t(117)},114:function(e,n,t){},116:function(e,n,t){},117:function(e,n,t){"use strict";t.r(n);var a=t(45),r=t.n(a),o=t(86),c=t.n(o),s=(t(114),t(65)),i=t.n(s),u=t(84),p=t(92),l=(t(116),t(88)),f=t(80),w=t(94),m=t(89),d=t(93),h=t(90),g=t(3),v=t(91),b=t(60),y=t(56),k=t(55),j=t(64),E=t(87),O=t(79),P=t(47),x=t(71),S=t(83),F=new b.b({fill:new k.a({color:"rgba(0, 0, 255, 0.3)"})}),q=new b.b({image:new j.a({radius:7,fill:new k.a({color:"black"}),stroke:new y.a({color:"white",width:2})})});function G(){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(i.a.mark((function e(){var n,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://opendata.paris.fr/api/records/1.0/search/?dataset=coronavirus-port-du-masque-obligatoire-lieux-places-et-marches&q=&rows=100&facet=nom_long&facet=ardt");case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,e.abrupt("return",t.records.map((function(e){return e.fields.geo_shape.coordinates[0].map((function(e){return Object(g.d)(e)}))})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,n){var t=n.getPosition();if(t){var a=Object(O.a)(e),r=new P.a(t),o=new x.a(r);a.drawFeature(o,q)}}var B=function(){var e=Object(a.useState)(!1),n=Object(p.a)(e,2),t=n[0],o=n[1],c=function(){var e=Object(u.a)(i.a.mark((function e(){var n,a,r,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:n=e.sent,a={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:3857",center:[0,0]}},features:[{type:"Feature",geometry:{type:"Polygon",coordinates:n}}]},r=new d.a({features:(new v.a).readFeatures(a)}),c=new m.a({source:r,style:F}),(s=new E.a({trackingOptions:{enableHighAccuracy:!0},projection:"EPSG:3857"})).setTracking(!0),s.on("change",(function(){var e=s.getPosition();if(e){var a=S.point(e),r=S.polygon(n),c=S.booleanPointInPolygon(a,r);c&&!t&&window.navigator.vibrate(300),o(c)}})),s.on("error",(function(e){console.warn("geolocation error",e)})),u=new h.a,new l.a({target:"map",layers:[new w.a({source:u}),c],view:new f.a({projection:"EPSG:3857",center:Object(g.d)([2.3488,48.8534]),zoom:13}),controls:[]}),c.on("postrender",(function(e){return z(e,s)}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){c()}),[]),r.a.createElement("div",{className:"app"},r.a.createElement("div",{id:"map",className:"map"}),r.a.createElement("header",{className:(t?"mask-on":"mask-off")+" app-header"},"zones de port du masque"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[109,1,2]]]);
//# sourceMappingURL=main.42e9bb73.chunk.js.map